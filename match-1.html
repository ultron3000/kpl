<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>KPL Live Score - Titans vs Strikers</title>
<style>
  body {font-family: Arial, sans-serif; background:#0b132b; color:#fff; margin:0; padding:0;}
  .container {max-width:900px; margin:40px auto; padding:20px; background:#1c2541; border-radius:10px;}
  h1 {text-align:center; color:#ffcc00;}
  .score {text-align:center; font-size:2em; margin:10px 0;}
  .section {background:#3a506b; margin-top:20px; padding:15px; border-radius:8px;}
  table {width:100%; border-collapse:collapse; margin-top:10px;}
  th, td {border-bottom:1px solid #555; padding:8px; text-align:left;}
  th {color:#ffcc00;}
  .footer {text-align:center; font-size:0.8em; color:#ccc; margin-top:10px;}
</style>
</head>
<body>
<div class="container">
  <h1 id="match-name">Loading...</h1>
  <div id="venue"></div>
  <div class="score" id="summary"></div>

  <div id="innings"></div>
  <div class="footer">Auto-refresh every 10s</div>
</div>

<script>
async function loadScore() {
  try {
    const res = await fetch('data/match-1.json?nocache=' + Date.now());
    const data = await res.json();
    document.getElementById('match-name').textContent = data.match;
    document.getElementById('venue').textContent = `${data.venue} | ${data.status}`;
    const inning = data.innings[data.currentInnings];
    document.getElementById('summary').textContent = `${inning.team} ${inning.runs}/${inning.wickets} (${inning.overs} ov)`;

    const html = data.innings.map(inng => `
      <div class="section">
        <h2>${inng.team} Innings</h2>
        <p><b>Runs:</b> ${inng.runs} | <b>Wickets:</b> ${inng.wickets} | <b>Overs:</b> ${inng.overs}</p>
        <p><b>Extras:</b> Wd:${inng.extras.wides}, Nb:${inng.extras.noballs}, B:${inng.extras.byes}, Lb:${inng.extras.legbyes} â€” Total:${inng.extras.total}</p>

        <h3>Batsmen</h3>
        <table>
          <tr><th>Name</th><th>R</th><th>B</th><th>4s</th><th>6s</th><th>Status</th></tr>
          ${inng.batsmen.map(b=>`<tr><td>${b.name}</td><td>${b.runs}</td><td>${b.balls}</td><td>${b.fours}</td><td>${b.sixes}</td><td>${b.status}</td></tr>`).join('')}
        </table>

        <h3>Bowlers</h3>
        <table>
          <tr><th>Name</th><th>O</th><th>R</th><th>W</th></tr>
          ${inng.bowlers.map(b=>`<tr><td>${b.name}</td><td>${b.overs}</td><td>${b.runs}</td><td>${b.wickets}</td></tr>`).join('')}
        </table>

        <h3>Fall of Wickets</h3>
        <ul>${inng.fallOfWickets.map(f=>`<li>${f.batsman} - ${f.score} (${f.over})</li>`).join('')}</ul>
      </div>
    `).join('<hr>');

    document.getElementById('innings').innerHTML = html;
  } catch(e) {
    document.getElementById('summary').textContent = 'Error loading data...';
  }
}
loadScore();
setInterval(loadScore, 10000);
</script>
</body>
</html>
