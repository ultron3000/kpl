<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KPL Live Score - Titans vs Strikers</title>
<style>
  body { font-family: Arial, sans-serif; background: #0b132b; color: #fff; margin: 0; padding: 0; }
  .container { max-width: 800px; margin: 40px auto; padding: 20px; background: #1c2541; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.3); }
  h1 { text-align: center; color: #ffcc00; }
  .score { text-align: center; font-size: 2em; margin: 20px 0; }
  .section { background: #3a506b; margin-top: 20px; padding: 15px; border-radius: 8px; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border-bottom: 1px solid #ccc; padding: 8px; text-align: left; }
  th { color: #ffcc00; }
  .footer { text-align: center; font-size: 0.8em; color: #aaa; margin-top: 10px; }
</style>
</head>
<body>
<div class="container">
  <h1 id="match-name">KPL Live Score</h1>
  <div id="venue"></div>
  <div class="score" id="score-summary"></div>

  <div class="section" id="innings"></div>
  <div class="footer">Auto-refreshed every 10s</div>
</div>

<script>
async function loadLive() {
  try {
    const res = await fetch('data/match.json?nocache=' + Date.now());
    const data = await res.json();
    document.getElementById('match-name').textContent = data.match;
    document.getElementById('venue').textContent = `Venue: ${data.venue} | ${data.status}`;
    const current = data.innings[data.currentInnings];
    document.getElementById('score-summary').textContent = `${current.team} ${current.runs}/${current.wickets} (${current.overs} ov)`;

    const inningsHTML = data.innings.map(inning => `
      <h2>${inning.team} Innings</h2>
      <p>Runs: ${inning.runs} | Wickets: ${inning.wickets} | Overs: ${inning.overs}</p>
      <h3>Batsmen</h3>
      <table>
        <tr><th>Name</th><th>R</th><th>B</th><th>Status</th></tr>
        ${inning.batsmen.map(b => `<tr><td>${b.name}</td><td>${b.runs}</td><td>${b.balls}</td><td>${b.status}</td></tr>`).join('')}
      </table>
      <h3>Bowlers</h3>
      <table>
        <tr><th>Name</th><th>O</th><th>R</th><th>W</th></tr>
        ${inning.bowlers.map(bw => `<tr><td>${bw.name}</td><td>${bw.overs}</td><td>${bw.runs}</td><td>${bw.wickets}</td></tr>`).join('')}
      </table>
      <h3>Fall of Wickets</h3>
      <ul>${inning.fallOfWickets.map(f => `<li>${f.wicket}-${f.runs} (${f.batsman}, ${f.over})</li>`).join('')}</ul>
      <p><b>Extras:</b> ${Object.entries(inning.extras).map(([k,v]) => `${k}:${v}`).join(', ')}</p>
    `).join('<hr>');

    document.getElementById('innings').innerHTML = inningsHTML;
  } catch (e) {
    document.getElementById('score-summary').textContent = "Error loading live data...";
  }
}
loadLive();
setInterval(loadLive, 10000);
</script>
</body>
</html>
